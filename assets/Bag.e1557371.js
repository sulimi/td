import{b as z,_ as L,a as M}from"./AddOrderModal.dac36717.js";import{d as P,c as u,r as o,z as $,aw as F,o as O,b as Q,a as s,k as m,F as R,h as E,g as b,l as g,u as T}from"./index.e2aa8f04.js";import{_ as U,a as V,u as q}from"./downloadHook.162ba68c.js";import{_ as A,u as j}from"./tableFilterHook.33ec43f2.js";import{u as G}from"./scrollRefHook.df38fe7d.js";import"./index.6dfe0743.js";import"./Alert.5c9fe531.js";const H={class:"bag-table"},J=b("div",{class:"b-top"},null,-1),K=["onClick"],W={inheritAttrs:!1},na=P({...W,__name:"Bag",setup(X){const p=E(),{state:n,commit:i}=T(),{onDownload:v}=q(),{getFilterData:D}=j(),{resetScroll:w}=G(),x=u(()=>n.bagData),l=o(!1),d=o("default"),r=o(!1),c=o(),f=u(()=>{var e;return(e=n.bagData)==null?void 0:e.length}),_=o(20),h=u(()=>{const e=n.bagData,a=N=>({filters:D(e,N)});return[{title:"Spec",dataIndex:"spec",sortable:{sortDirections:["ascend","descend"]}},{title:"OEM",dataIndex:"brand",filterable:a("brand")},{title:"Model Name",dataIndex:"modelName",filterable:a("modelName")},{title:"Capacity",dataIndex:"capacity",filterable:a("capacity")},{title:"Part No",dataIndex:"model",sortable:{sortDirections:["ascend","descend"]}},{title:"Color",dataIndex:"color",sortable:{sortDirections:["ascend","descend"]}},{title:"Condition",dataIndex:"condition",filterable:a("condition")},{title:"Quantity",dataIndex:"quantity",sortable:{sortDirections:["ascend","descend"]}},{title:"",dataIndex:"action"}]}),y=()=>{r.value=!0},C=e=>{var a;(a=c.value)==null||a.refreshLoading(),i("removeItemBagData",e)},I=()=>{try{l.value=!0,v(n.bagData,"Bag"),setTimeout(()=>l.value=!1,200)}catch(e){console.log(e),l.value=!1,d.value="error"}},B=(e,a)=>{e<=0||(a.bagQty=e,i("addItemBagData",a))},k=(e,a)=>{a.bagPrice=e,+e&&i("addItemBagData",a)},S=()=>{w()};return $(()=>{setTimeout(()=>{var e,a;(a=(e=c.value)==null?void 0:e.finishLoading)==null||a.call(e)},100)}),F(()=>{f.value||p.push({name:"home"})}),(e,a)=>(O(),Q(R,null,[s(U,{class:"bag-page-wrapper",back:!0},{top:m(()=>[s(V,{downloading:l.value,"download-status":d.value,"onUpdate:download-status":a[0]||(a[0]=t=>d.value=t),onDownload:I},null,8,["downloading","download-status"])]),default:m(()=>[b("div",H,[J,s(A,{ref_key:"tableListRef",ref:c,class:"bag-page-table",data:g(x),columns:g(h),"page-size":_.value,"onUpdate:page-size":a[1]||(a[1]=t=>_.value=t),"min-qty":1,onChangeQty:B,onChangePrice:k,onPageChange:S},{action:m(({record:t})=>[b("img",{src:L,class:"delete-bag",onClick:()=>C(t)},null,8,K)]),_:1},8,["data","columns","page-size"])]),s(M,{class:"bag-page-submit",onSubmit:y,disable:!g(f)},null,8,["disable"])]),_:1}),s(z,{visible:r.value,"onUpdate:visible":a[2]||(a[2]=t=>r.value=t)},null,8,["visible"])],64))}});export{na as default};
